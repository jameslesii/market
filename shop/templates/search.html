<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <title>Verdant Networküì°</title>
        
        {% load static %}
        <link rel="icon" type="image/x-icon" href="{%static '/icon/james.jpg' %}">

        <link rel="stylesheet" href="{%static '/bootstrap.min.css' %}">
        <script src="{%static '/bootstrap.bundle.min.js'%}"></script>
    
        <link rel="stylesheet" href="../static/style.css">
        <script src="../static/script.js"></script>

        
    </head>
<body>
    {% include 'sidenav.html' %}



    <nav class="navbar navbar-expand-sm  navbar-dark " style="background-color: rgb(0, 0, 102);">
        <div class="container-fluid mt-3" style="
        display: flex;
        justify-content: center;
        place-items: center;">
            <h3 style="
            background: linear-gradient(90deg,gold,cyan,magenta);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            display: flex;
            justify-content: center;
            place-items: center;font-size:16px;">A Product Of Lj-Technologies</h3>
        </div>
      </nav>
    
        <nav class="navbar navbar-expand-sm navbar-dark" style="background-color:darkgreen;">
            <div class="container-fluid">
       
                <a class="navbar-brand" style="font-size:16px;" id="top" href="#">üì±KabiangaüõíSecond Hand Items</a>
                
                <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#collapsibleNavbar">
                    <span class="navbar-toggler-icon"></span>
                </button>
                <div class="collapse navbar-collapse" id="collapsibleNavbar">
                    <ul class="navbar-nav">
                        <li class="nav-item">
                            <a class="nav-link" href="{%url 'home'%}">üèòHome</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="{%url 'categories' %}">Categories</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="{%url 'user_messages' %}">Messages</a>
                        </li>
                        
                        <li class="nav-item">
                            <a class="nav-link" href="{%url 'jobs'  %}">Jobs</a>
                        </li>
                        {% if request.user.is_authenticated %}
                        {% else %}
                            <li class="nav-item">
                                <a class="nav-link" href="{%url 'register'%}">Register</a>
                            </li>
                        {% endif %}
    
                        {% if request.user.is_authenticated %}
                        {% else %}
                            <li class="nav-item">
                                <a class="nav-link" href="{%url 'login'%}">Login</a>
                            </li>
                        {% endif %}
    
                        {% if request.user.is_authenticated %}
                        <li class="nav-item">
                            <a class="nav-link" href="{% url 'sell' %}" >Sell</a>                      
                        </li>
                        {% endif %}
    
                        <li class="nav-item">
                            <a class=" btn btn-outline-warning" href="{%url 'search'  %}">Search</a>
                        </li>
                        
                    </ul>
                    
                </div>
            </div>
        </nav>
        
        <nav class="navbar navbar-expand-sm" style="background-color:rgb(230, 230, 230);padding: 2px 0%; display:flex;flex-direction:row;flex-wrap:nowrap;">
            <div class="container-fluid">
                <a class="navbar-brand" style="margin:0%;padding:0%"  href="#" data-bs-target="#demo-end" href="#" role="button" data-bs-toggle="offcanvas" >
                    <img src="../static/icon/james.jpg" alt="Avatar Logo" style="width:50px;border:3px solid white;" class="rounded-pill"> 
                </a>
                <div>
                                    
                <form  method=POST class="d-flex input-group" style="max-width:400px">
                    {% csrf_token %}
                    <input type="input" class="form-control" placeholder="Search Product Name" name="search">
                    <button class="btn" type="submit" style="background-color:navy;color:white;">Go</button>
                    
                </form>

                    {% if query %}
                        <div id="search-results" class="card" style="position: absolute;z-index: 2;background-color: whitesmoke;width:250px">
                            {% for result in results %}
                            <li class="list-group-item">{{result.ProductName}}</li>
                            {% endfor %}
                        </div>
                    {% endif %}
                </div>
            </div>
        </nav>

    <div class="container">
    {% if search %}
        <div class="alert alert-primary alert-dismissible">
            <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
            <strong>Showing </strong>results for {{search}}.
        </div>

        <div style="display: flex; flex-direction: row; flex-wrap: wrap; ">       

                {% for product in searched %}		
                                   
                    <div class="card" style="max-width:360px;border: none;">
                        <a href="#" class="list-group-item list-group-item-action" style="max-width: 320px;">{{product.ProductCategory}}</a>
                        <a  href="#" class="btn card-header" style="width: 320px;">@{{product.Owner|title}}</a>
                       
                        {% if product.ProductImage %}
                            <img class="card-img-top" src="{{product.ProductImage.url}}" alt="{{product.ProductImage.url}}" style="margin: 10px 0px 0px 10px; max-width: 320px;">
                        {% else %}
                            <img class="card-img-top" src="{%static 'icon/james.jpg' %}" alt="" style="max-width: 320px;">
                        {% endif %}
                        
                        <div class="card-body">
                            
                            <h4 class="card-title" style="color: navy;">{{product.ProductName|title}}</h4>
                            <p class="card-text" style="color: darkgreen;">Price: {{ product.ProductPrice }}&nbsp;Ksh</p>
                            <p class="card-text">Total Number: {{ product.ProductQuantity }}</p>

                            <a href="{% url 'show_product' product.id %}" class="btn btn-primary" style="margin-top: 5px;">
                                ViewüëÅÔ∏è
                            </a>
                            
                            <a href="#" class="btn " style="margin-top: 5px; background-color: darkmagenta;color: white;">Message üì©</a>
                            
                            <a href="#" class="btn btn-success" style="margin-top: 5px;">Order üöö</a>
                            <p></p>
                            <div class="card" style="max-width: 320px;">
                                
                                <a class="btn card-header" data-bs-toggle="collapse" href="#{{product.ProductName}}">
                                    Product Description
                                </a>
                                
                                <div id="{{product.ProductName}}" class="collapse show" data-bs-parent="#accordion">
                                <div class="card-body">
                                    {{ product.ProductDescription }}
                                </div>
                                </div>
                            </div>

                        </div>
                    </div>

                {% endfor %}
            
        </div>
        {% else %}
        <div class="toast show">
            <div class="toast-header">
              <strong class="me-auto">Enter Product Name</strong>
              <button type="button" class="btn-close" data-bs-dismiss="toast"></button>
            </div>
            <div class="toast-body">
              <p>Provide the product name in the form above and press Go</p>
            </div>
          </div>
        </div>
        <div style="height: 30vh;">

        </div>
    {% endif %}
    </div>

    <div class="d-flex justify-content-end"> 
        <a href="#top" style="background: linear-gradient(gold,cyan,magenta,navy,darkmagenta);
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent; font-size: 50px; margin-right: 20px;">
        &spades;
        </a>
    </div>
    
    {% include 'footer.html' %}
</body>  
</html>
